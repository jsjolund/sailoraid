The software has been divided into two parts, the firmware for the ARM MCU with associated sensors, and an Android application which can display sensor data. These two parts utilize a Bluetooth connection to communicate their current states. For example, when the IMU calculates a new orientation, this data should be processed by the firmware, and the resulting calculations sent to the Android application over Bluetooth to be displayed to the user.

\subsection{ARM firmware}
In order to speed up firmware development, the STM32CubeMX \cite{stm32cubemx} initialization code generator was used to set up a basic working system. This application, developed by ST, can generate C language code for setting up MCU clocks, peripherals, interrupts and similar. It is controlled by a graphical interface for setting MCU options and controlling the previously mentioned code generation.

The main challange in working with this type of code generation is integrating it with software libraries not built for it. If the library interferes with generated code by overriding functions and register values, the software may enter an undefined state and stop working. Care therefor had to be taken to only use the parts of the libraries which did not interfere. Frequent testing of any newly added functionality had to be done in order to find interfering parts.

Two libraries produced by ST were used, one for the Bluetooth module, and one for the IMU.
\subsubsection{Bluetooth}
The Bluetooth firmware package called X-CUBE-BLE1 \cite{x-cube-ble1} developed by ST consists of several parts, MCU and Bluetooth evaluation board device definitions such as named pins and ports, functions for manipulating them, a Bluetooth GATT server implementation, as well as several demo applications which could communicate with Android devices. Additionally a Android demo application for displaying sensor data from Bluetooth was included.

These parts were integrated into the code generated by STM32CubeMX

\subsubsection{IMU}
X-CUBE-MEMS1 \cite{x-cube-mems1}

\subsection{Android application}

